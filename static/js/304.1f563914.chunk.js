"use strict";(self.webpackChunkvideoodyssee_frontend=self.webpackChunkvideoodyssee_frontend||[]).push([[304],{304:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});var t=a(379),l=a(43),n=a(579);const r=e=>{let{onTalkSelect:s}=e;const[a,t]=(0,l.useState)(""),[r,i]=(0,l.useState)(null),[c,o]=(0,l.useState)([]),[d,m]=(0,l.useState)(!1),[u,h]=(0,l.useState)(""),p=e=>{const s=[];return e.schedule&&e.schedule.conference&&e.schedule.conference.days?(e.schedule.conference.days.forEach(e=>{e.rooms&&Object.keys(e.rooms).forEach(a=>{const t=e.rooms[a];Array.isArray(t)&&t.forEach(t=>{const l={id:t.id,title:t.title||"",subtitle:t.subtitle||"",abstract:t.abstract||"",description:t.description||t.abstract||"",date:t.date||e.date,start:t.start||"",duration:t.duration||"",room:t.room||a,language:t.language||"en",type:t.type||"",url:t.url||"",persons:t.persons?t.persons.map(e=>e.public_name||e.name).join(", "):"",tags:[t.type,t.language,t.room].filter(Boolean).join(", "),originalUrl:t.url||"",formattedDate:t.date?g(t.date):e.date?g(e.date):"",guid:t.guid,slug:t.slug,do_not_record:t.do_not_record};s.push(l)})})}),console.log("Extracted ".concat(s.length," talks from schedule")),s):(console.log("No schedule.conference.days found in data"),s)},g=e=>{try{const s=new Date(e);return isNaN(s.getTime())?e:s.toLocaleDateString("de-DE",{weekday:"short",day:"numeric",month:"long",year:"numeric"})}catch(s){return e}};return(0,n.jsxs)("div",{className:"schedule-import",children:[(0,n.jsx)("h3",{children:"\ud83d\udcc5 Pretalx Schedule Import"}),(0,n.jsxs)("div",{className:"schedule-url-input",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"schedule-url",children:"Schedule JSON URL"}),(0,n.jsxs)("div",{className:"url-input-group",children:[(0,n.jsx)("input",{type:"url",id:"schedule-url",className:"form-input",value:a,onChange:e=>t(e.target.value),placeholder:"https://pretalx.example.com/event/schedule/export/schedule.json"}),(0,n.jsxs)("button",{type:"button",className:"load-button",onClick:async()=>{if(a.trim()){m(!0),h("");try{const e=await fetch(a);if(!e.ok)throw new Error("HTTP ".concat(e.status,": ").concat(e.statusText));const s=await e.json(),t=p(s);i(s),o(t),0===t.length&&h("Keine Talks in diesem Schedule gefunden")}catch(e){console.error("Fehler beim Laden des Schedules:",e),h("Fehler beim Laden: ".concat(e.message))}finally{m(!1)}}else h("Bitte gib eine g\xfcltige Schedule-URL ein")},disabled:d,children:[d?"\u23f3":"\ud83d\udce5"," Laden"]})]})]}),u&&(0,n.jsx)("div",{className:"alert alert-error",children:u})]}),r&&(0,n.jsxs)("div",{className:"schedule-info",children:[(0,n.jsxs)("h4",{children:["\ud83c\udfaa ",r.schedule.conference.title]}),(0,n.jsxs)("p",{children:["\ud83d\udcc5 ",r.schedule.conference.start," bis ",r.schedule.conference.end," | \ud83d\udde3\ufe0f ",c.length," Talks gefunden"]})]}),c.length>0&&(0,n.jsxs)("div",{className:"talks-list",children:[(0,n.jsx)("h4",{children:"Talks ausw\xe4hlen:"}),(0,n.jsx)("div",{className:"talks-grid",children:c.map(e=>(0,n.jsxs)("div",{className:"talk-card",onClick:()=>(e=>{s({title:e.title,subtitle:e.subtitle,description:e.description,persons:e.persons,tags:e.tags,date:e.date,originalUrl:e.originalUrl})})(e),children:[(0,n.jsxs)("div",{className:"talk-header",children:[(0,n.jsx)("h4",{className:"talk-title",children:e.title}),e.subtitle&&(0,n.jsx)("p",{className:"talk-subtitle",children:e.subtitle})]}),(0,n.jsxs)("div",{className:"talk-meta",children:[(0,n.jsxs)("div",{className:"talk-date-time",children:["\ud83d\udcc5 ",e.formattedDate,e.start&&(0,n.jsxs)("span",{className:"talk-time",children:[" \u2022 \u23f0 ",e.start]}),e.duration&&(0,n.jsxs)("span",{className:"talk-duration",children:[" \u2022 \u23f1\ufe0f ",e.duration]})]}),e.room&&(0,n.jsxs)("div",{className:"talk-room",children:["\ud83c\udfe0 ",e.room]}),e.type&&(0,n.jsxs)("div",{className:"talk-type",children:["\ud83c\udfaf ",e.type]}),e.persons&&(0,n.jsxs)("div",{className:"talk-persons",children:["\ud83d\udc64 ",e.persons]})]}),e.abstract&&(0,n.jsx)("p",{className:"talk-description",children:e.abstract.length>150?"".concat(e.abstract.substring(0,150),"..."):e.abstract}),(0,n.jsx)("div",{className:"talk-footer",children:(0,n.jsx)("span",{className:"select-hint",children:"Klicken zum Ausw\xe4hlen"})})]},e.id))})]})]})},i={title:"",subtitle:"",persons:[],tags:[],conference:"",language:"eng",date:(new Date).toISOString().split("T")[0],url:"",name:"",email:"",link:"",description:""},c=()=>{const[e,s]=(0,l.useState)(i),[a,c]=(0,l.useState)({err:!1,message:""}),[o,d]=(0,l.useState)({success:!1,message:""}),[m,u]=(0,l.useState)([]),h=a=>{const{name:l,value:n}=a.target;s((0,t.A)((0,t.A)({},e),{},{[l]:n}))};return(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VOCTOWEB_API_URL,"/public/conferences"),{headers:{Accept:"application/json","Content-Type":"application/json"}}),a=await e.json();u(a.conferences||[]),a.conferences&&a.conferences.length>0&&s(e=>(0,t.A)((0,t.A)({},e),{},{conference:a.conferences[0].acronym}))}catch(a){console.log(a)}})()},[]),(0,n.jsxs)("div",{className:"form-container",children:[(0,n.jsx)("img",{src:"/static/images/logo/logo-small.png",alt:"Freifunk logo",className:"logo"}),(0,n.jsx)("h2",{className:"form-title",children:"Video Upload"}),(0,n.jsx)(r,{onTalkSelect:a=>{const l=a.persons?a.persons.split(",").map(e=>e.trim()).filter(e=>e):[],n=a.tags?a.tags.split(",").map(e=>e.trim()).filter(e=>e):[];let r=e.date;if(a.date)try{const e=new Date(a.date);isNaN(e.getTime())||(r=e.toISOString().split("T")[0])}catch(i){console.log("Date parsing error:",i)}s((0,t.A)((0,t.A)({},e),{},{title:a.title||e.title,subtitle:a.subtitle||e.subtitle,persons:l.length>0?l:e.persons,tags:n.length>0?n:e.tags,description:a.description||e.description,date:r,link:a.originalUrl||e.link,conference:e.conference,language:e.language,url:e.url,name:e.name,email:e.email})),d({success:!0,message:'Talk "'.concat(a.title,'" wurde erfolgreich importiert!')}),setTimeout(()=>d({success:!1,message:""}),5e3)}}),o.success&&(0,n.jsx)("div",{className:"alert alert-success",children:o.message}),a.err&&(0,n.jsx)("div",{className:"alert alert-error",children:a.message}),(0,n.jsxs)("form",{onSubmit:async s=>{s.preventDefault();try{let s=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL,"/video/"),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}),a=await s.json();console.log(a),200===s.status?(d({success:!0,message:a.data}),setTimeout(()=>d({success:!1,message:""}),5e3)):(c({err:!0,message:a.message}),setTimeout(()=>c({err:!1,message:""}),5e3))}catch(a){console.log(a),c({err:!0,message:"Ein Fehler ist aufgetreten."}),setTimeout(()=>c({err:!1,message:""}),5e3)}},children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"title",children:"Title"}),(0,n.jsx)("input",{className:"form-input",type:"text",id:"title",name:"title",value:e.title,onChange:h,required:!0})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"subtitle",children:"Subtitle"}),(0,n.jsx)("input",{className:"form-input",type:"text",id:"subtitle",name:"subtitle",value:e.subtitle,onChange:h})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"persons",children:"Persons"}),(0,n.jsxs)("div",{className:"tag-input-container",children:[(0,n.jsx)("div",{className:"tags",children:e.persons.map((a,l)=>(0,n.jsxs)("span",{className:"tag",children:[a,(0,n.jsx)("button",{type:"button",className:"tag-remove",onClick:()=>{const a=e.persons.filter((e,s)=>s!==l);s((0,t.A)((0,t.A)({},e),{},{persons:a}))},children:"\xd7"})]},l))}),(0,n.jsx)("input",{className:"tag-input",type:"text",placeholder:"Add person and press Enter",onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();const l=a.target.value.trim();l&&!e.persons.includes(l)&&(s((0,t.A)((0,t.A)({},e),{},{persons:[...e.persons,l]})),a.target.value="")}}})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"tags",children:"Tags"}),(0,n.jsxs)("div",{className:"tag-input-container",children:[(0,n.jsx)("div",{className:"tags",children:e.tags.map((a,l)=>(0,n.jsxs)("span",{className:"tag",children:[a,(0,n.jsx)("button",{type:"button",className:"tag-remove",onClick:()=>{const a=e.tags.filter((e,s)=>s!==l);s((0,t.A)((0,t.A)({},e),{},{tags:a}))},children:"\xd7"})]},l))}),(0,n.jsx)("input",{className:"tag-input",type:"text",placeholder:"Add tag and press Enter",onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();const l=a.target.value.trim();l&&!e.tags.includes(l)&&(s((0,t.A)((0,t.A)({},e),{},{tags:[...e.tags,l]})),a.target.value="")}}})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"conference",children:"Conference"}),(0,n.jsx)("select",{className:"form-select",id:"conference",name:"conference",value:e.conference,onChange:h,children:m.map(e=>{let{acronym:s,title:a}=e;return(0,n.jsx)("option",{value:s,children:a},s)})})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"language",children:"Language"}),(0,n.jsxs)("select",{className:"form-select",id:"language",name:"language",value:e.language,onChange:h,children:[(0,n.jsx)("option",{value:"eng",children:"English"}),(0,n.jsx)("option",{value:"deu",children:"German"}),(0,n.jsx)("option",{value:"rus",children:"Russian"}),(0,n.jsx)("option",{value:"fra",children:"French"}),(0,n.jsx)("option",{value:"spa",children:"Spanish"}),(0,n.jsx)("option",{value:"jpn",children:"Japanese"}),(0,n.jsx)("option",{value:"hin",children:"Hindi"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"date",children:"Date"}),(0,n.jsx)("input",{className:"form-input",type:"date",id:"date",name:"date",value:e.date,onChange:h})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"url",children:"Video URL"}),(0,n.jsx)("input",{className:"form-input",type:"url",id:"url",name:"url",value:e.url,onChange:h,required:!0})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"name",children:"Name"}),(0,n.jsx)("input",{className:"form-input",type:"text",id:"name",name:"name",value:e.name,onChange:h,required:!0})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email"}),(0,n.jsx)("input",{className:"form-input",type:"email",id:"email",name:"email",value:e.email,onChange:h,required:!0})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"link",children:"Link"}),(0,n.jsx)("input",{className:"form-input",type:"url",id:"link",name:"link",value:e.link,onChange:h})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"description",children:"Description"}),(0,n.jsx)("textarea",{className:"form-input form-textarea",id:"description",name:"description",value:e.description,onChange:h,rows:"4"})]}),(0,n.jsx)("button",{type:"submit",className:"form-button",children:"Submit"})]})]})}}}]);
//# sourceMappingURL=304.1f563914.chunk.js.map