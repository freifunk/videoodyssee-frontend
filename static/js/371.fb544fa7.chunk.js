"use strict";(self.webpackChunkvideoodyssee_frontend=self.webpackChunkvideoodyssee_frontend||[]).push([[371],{371:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var l=a(379),n=a(43),t=a(579);const r={title:"",subtitle:"",persons:[],tags:[],conference:"",language:"eng",date:(new Date).toISOString().split("T")[0],url:"",name:"",email:"",link:"",description:""},i=()=>{const[e,s]=(0,n.useState)(r),[a,i]=(0,n.useState)({err:!1,message:""}),[o,c]=(0,n.useState)({success:!1,message:""}),[m,d]=(0,n.useState)([]),u=a=>{const{name:n,value:t}=a.target;s((0,l.A)((0,l.A)({},e),{},{[n]:t}))};return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VOCTOWEB_API_URL,"/public/conferences"),{headers:{Accept:"application/json","Content-Type":"application/json"}}),a=await e.json();d(a.conferences||[]),a.conferences&&a.conferences.length>0&&s(e=>(0,l.A)((0,l.A)({},e),{},{conference:a.conferences[0].acronym}))}catch(a){console.log(a)}})()},[]),(0,t.jsxs)("div",{className:"form-container",children:[(0,t.jsx)("img",{src:"/static/images/logo/logo-small.png",alt:"Freifunk logo",className:"logo"}),(0,t.jsx)("h2",{className:"form-title",children:"Video Upload"}),o.success&&(0,t.jsx)("div",{className:"alert alert-success",children:o.message}),a.err&&(0,t.jsx)("div",{className:"alert alert-error",children:a.message}),(0,t.jsxs)("form",{onSubmit:async s=>{s.preventDefault();try{let s=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL,"/video/"),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}),a=await s.json();console.log(a),200===s.status?(c({success:!0,message:a.data}),setTimeout(()=>c({success:!1,message:""}),5e3)):(i({err:!0,message:a.message}),setTimeout(()=>i({err:!1,message:""}),5e3))}catch(a){console.log(a),i({err:!0,message:"Ein Fehler ist aufgetreten."}),setTimeout(()=>i({err:!1,message:""}),5e3)}},children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"title",children:"Title"}),(0,t.jsx)("input",{className:"form-input",type:"text",id:"title",name:"title",value:e.title,onChange:u,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"subtitle",children:"Subtitle"}),(0,t.jsx)("input",{className:"form-input",type:"text",id:"subtitle",name:"subtitle",value:e.subtitle,onChange:u})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"persons",children:"Persons"}),(0,t.jsxs)("div",{className:"tag-input-container",children:[(0,t.jsx)("div",{className:"tags",children:e.persons.map((a,n)=>(0,t.jsxs)("span",{className:"tag",children:[a,(0,t.jsx)("button",{type:"button",className:"tag-remove",onClick:()=>{const a=e.persons.filter((e,s)=>s!==n);s((0,l.A)((0,l.A)({},e),{},{persons:a}))},children:"\xd7"})]},n))}),(0,t.jsx)("input",{className:"tag-input",type:"text",placeholder:"Add person and press Enter",onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();const n=a.target.value.trim();n&&!e.persons.includes(n)&&(s((0,l.A)((0,l.A)({},e),{},{persons:[...e.persons,n]})),a.target.value="")}}})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"tags",children:"Tags"}),(0,t.jsxs)("div",{className:"tag-input-container",children:[(0,t.jsx)("div",{className:"tags",children:e.tags.map((a,n)=>(0,t.jsxs)("span",{className:"tag",children:[a,(0,t.jsx)("button",{type:"button",className:"tag-remove",onClick:()=>{const a=e.tags.filter((e,s)=>s!==n);s((0,l.A)((0,l.A)({},e),{},{tags:a}))},children:"\xd7"})]},n))}),(0,t.jsx)("input",{className:"tag-input",type:"text",placeholder:"Add tag and press Enter",onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();const n=a.target.value.trim();n&&!e.tags.includes(n)&&(s((0,l.A)((0,l.A)({},e),{},{tags:[...e.tags,n]})),a.target.value="")}}})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"conference",children:"Conference"}),(0,t.jsx)("select",{className:"form-select",id:"conference",name:"conference",value:e.conference,onChange:u,children:m.map(e=>{let{acronym:s,title:a}=e;return(0,t.jsx)("option",{value:s,children:a},s)})})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"language",children:"Language"}),(0,t.jsxs)("select",{className:"form-select",id:"language",name:"language",value:e.language,onChange:u,children:[(0,t.jsx)("option",{value:"eng",children:"English"}),(0,t.jsx)("option",{value:"deu",children:"German"}),(0,t.jsx)("option",{value:"rus",children:"Russian"}),(0,t.jsx)("option",{value:"fra",children:"French"}),(0,t.jsx)("option",{value:"spa",children:"Spanish"}),(0,t.jsx)("option",{value:"jpn",children:"Japanese"}),(0,t.jsx)("option",{value:"hin",children:"Hindi"})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"date",children:"Date"}),(0,t.jsx)("input",{className:"form-input",type:"date",id:"date",name:"date",value:e.date,onChange:u})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"url",children:"Video URL"}),(0,t.jsx)("input",{className:"form-input",type:"url",id:"url",name:"url",value:e.url,onChange:u,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"name",children:"Name"}),(0,t.jsx)("input",{className:"form-input",type:"text",id:"name",name:"name",value:e.name,onChange:u,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email"}),(0,t.jsx)("input",{className:"form-input",type:"email",id:"email",name:"email",value:e.email,onChange:u,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"link",children:"Link"}),(0,t.jsx)("input",{className:"form-input",type:"url",id:"link",name:"link",value:e.link,onChange:u})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",htmlFor:"description",children:"Description"}),(0,t.jsx)("textarea",{className:"form-input form-textarea",id:"description",name:"description",value:e.description,onChange:u,rows:"4"})]}),(0,t.jsx)("button",{type:"submit",className:"form-button",children:"Submit"})]})]})}}}]);
//# sourceMappingURL=371.fb544fa7.chunk.js.map